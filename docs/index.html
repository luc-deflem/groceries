<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Grocery List">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="manifest" href="manifest.json">
    <title>Grocery List MVP</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>ğŸ›’ Grocery Manager</h1>
                <button id="refreshBtn" class="refresh-btn" title="Hard Refresh (Cmd+Shift+R)">ğŸ”„</button>
            </div>
        </header>
        
        <nav class="tab-navigation">
            <button class="tab-button active" data-tab="shopping" title="Shopping">ğŸ›’</button>
            <button class="tab-button" data-tab="pantry" title="Pantry">ğŸ </button>
            <button class="tab-button" data-tab="products" title="Products">ğŸ“‹</button>
            <button class="tab-button" data-tab="categories" title="Categories">âš™ï¸</button>
            <button class="tab-button" data-tab="sync" title="Sync">ğŸ“±</button>
        </nav>
        
        <main>
            <!-- Shopping List Tab -->
            <div class="tab-content active" id="shopping-tab">
                <div class="add-item-section">
                    <input type="text" id="itemInput" placeholder="Add item..." maxlength="100">
                    <select id="categorySelect">
                        <option value="produce">ğŸ¥¬ Produce</option>
                        <option value="dairy">ğŸ¥› Dairy</option>
                        <option value="meat">ğŸ¥© Meat</option>
                        <option value="pantry">ğŸ¥« Pantry</option>
                        <option value="frozen">ğŸ§Š Frozen</option>
                        <option value="bakery">ğŸ Bakery</option>
                        <option value="other">ğŸ“¦ Other</option>
                    </select>
                    <button id="addBtn">Add</button>
                </div>
                
                <div class="list-stats">
                    <span id="itemCount">0 items</span>
                    <button id="clearCompleted">Clear Completed</button>
                </div>
                
                <div class="grocery-list" id="groceryList">
                    <!-- Shopping items will be dynamically added here -->
                </div>
            </div>

            <!-- Pantry Stock Tab -->
            <div class="tab-content" id="pantry-tab">
                <div class="add-standard-item-section">
                    <input type="text" id="standardItemInput" placeholder="Add item..." maxlength="100">
                    <select id="standardCategorySelect">
                        <option value="produce">ğŸ¥¬ Produce</option>
                        <option value="dairy">ğŸ¥› Dairy</option>
                        <option value="meat">ğŸ¥© Meat</option>
                        <option value="pantry">ğŸ¥« Pantry</option>
                        <option value="frozen">ğŸ§Š Frozen</option>
                        <option value="bakery">ğŸ Bakery</option>
                        <option value="other">ğŸ“¦ Other</option>
                    </select>
                    <button id="addStandardBtn">Add</button>
                </div>
                
                <div class="pantry-actions">
                    <button id="addAllUnstocked">Add Out-of-Stock to List</button>
                </div>
                
                <div class="standard-list" id="standardList">
                    <!-- Standard items will be dynamically added here -->
                </div>
            </div>

            <!-- Products Tab -->
            <div class="tab-content" id="products-tab">
                <div class="products-search-section">
                    <input type="text" id="productSearchInput" placeholder="Search products..." maxlength="100">
                    <button id="clearSearchBtn">Clear</button>
                </div>
                
                <div class="add-product-section">
                    <input type="text" id="productInput" placeholder="Add new product..." maxlength="100">
                    <select id="productCategorySelect">
                        <!-- Options populated dynamically -->
                    </select>
                    <button id="addProductBtn">Add</button>
                </div>
                
                <div class="products-stats">
                    <span id="productCount">0 products</span>
                    <span id="filteredCount" style="display: none;">0 shown</span>
                </div>
                
                <div class="products-list" id="productsList">
                    <!-- Products will be dynamically added here -->
                </div>
            </div>

            <!-- Categories Management Tab -->
            <div class="tab-content" id="categories-tab">
                <div class="add-category-section">
                    <input type="text" id="categoryInput" placeholder="Add new category..." maxlength="50">
                    <input type="text" id="categoryEmojiInput" placeholder="ğŸ·ï¸" maxlength="10">
                    <button id="addCategoryBtn">Add Category</button>
                </div>
                
                <div class="category-help">
                    <p><strong>Shop Order:</strong> Drag categories to match your store's layout for optimal shopping flow.</p>
                </div>
                
                <div class="categories-list" id="categoriesList">
                    <!-- Categories will be dynamically added here -->
                </div>
            </div>

            <!-- Sync Tab -->
            <div class="tab-content" id="sync-tab">
                <div class="sync-section">
                    <h3>ğŸ“± Cross-Device Sync</h3>
                    <div class="sync-actions">
                        <button id="exportDataBtn" class="sync-btn">ğŸ“¤ Export Data</button>
                        <button id="importDataBtn" class="sync-btn secondary">ğŸ“¥ Import Data</button>
                        <input type="file" id="importFileInput" accept=".json" style="display: none;">
                    </div>
                    <div class="sync-info">
                        <h4>ğŸ³ Multi-Device Workflow:</h4>
                        <p><strong>ğŸ“± iPhone:</strong> Perfect for shopping - quick access to lists in-store</p>
                        <p><strong>ğŸ’» Mac & iPad:</strong> Ideal for menu planning, recipe management, and data entry</p>
                        <br>
                        <h4>ğŸ“Š How to Sync:</h4>
                        <p><strong>1. Export:</strong> Use ğŸ“¤ Export on your current device to save all data</p>
                        <p><strong>2. Transfer:</strong> Share the "grocery-data.json" file via iCloud, email, or AirDrop</p>
                        <p><strong>3. Import:</strong> Use ğŸ“¥ Import on your other device to load the data</p>
                        <br>
                        <p><small><em>ğŸ’¡ Tip: Export from your main device (Mac/iPad) regularly and import to iPhone before shopping</em></small></p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Change Category Modal -->
    <div id="changeCategoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">Change Category</span>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <label for="newCategorySelect">Select new category for "<span id="itemNameSpan"></span>":</label>
                <select id="newCategorySelect">
                    <!-- Options will be populated dynamically -->
                </select>
            </div>
            <div class="modal-actions">
                <button class="modal-btn secondary" id="cancelChangeCategory">Cancel</button>
                <button class="modal-btn primary" id="confirmChangeCategory">Change Category</button>
            </div>
        </div>
    </div>

    <!-- Product Edit Modal -->
    <div id="productEditModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">Edit Product</span>
                <button class="close-modal" id="closeProductModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-field">
                    <label for="editProductName">Product Name:</label>
                    <input type="text" id="editProductName" maxlength="100">
                </div>
                
                <div class="modal-field">
                    <label for="editProductCategory">Category:</label>
                    <select id="editProductCategory">
                        <!-- Options populated dynamically -->
                    </select>
                </div>

                <div class="modal-field">
                    <label>Status Options:</label>
                    <div class="status-checkboxes">
                        <label class="status-checkbox-label">
                            <input type="checkbox" id="editInShopping">
                            <span>ğŸ›’ Shopping List</span>
                        </label>
                        <label class="status-checkbox-label">
                            <input type="checkbox" id="editInPantry">
                            <span>ğŸ  Pantry</span>
                        </label>
                        <label class="status-checkbox-label">
                            <input type="checkbox" id="editInStock">
                            <span>âœ… In Stock</span>
                        </label>
                        <label class="status-checkbox-label">
                            <input type="checkbox" id="editInSeason">
                            <span>ğŸŒ± In Season</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn secondary" id="cancelProductEdit">Cancel</button>
                <button class="modal-btn primary" id="confirmProductEdit">Save Changes</button>
            </div>
        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>